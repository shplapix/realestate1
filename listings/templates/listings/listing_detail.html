{% extends 'base.html' %}
{% block title %}{{ listing.title }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8">
        <div class="card mb-4">
            <div class="card-body">
                <h2 class="text-gradient mb-3">{{ listing.title }}</h2>
                <p class="text-muted">ğŸ“ {{ listing.address }}, {{ listing.city }}, {{ listing.state }}</p>

                {% if listing.photo_main %}
                <img src="{{ listing.photo_main.url }}" class="img-fluid mb-3" alt="{{ listing.title }}"
                    style="width: 100%; max-height: 500px; object-fit: cover;">
                {% endif %}

                <div class="row mt-4">
                    {% if listing.photo_1 %}
                    <div class="col-md-6 mb-3">
                        <img src="{{ listing.photo_1.url }}" class="img-fluid" alt=""
                            style="width: 100%; height: 250px; object-fit: cover;">
                    </div>
                    {% endif %}
                    {% if listing.photo_2 %}
                    <div class="col-md-6 mb-3">
                        <img src="{{ listing.photo_2.url }}" class="img-fluid" alt=""
                            style="width: 100%; height: 250px; object-fit: cover;">
                    </div>
                    {% endif %}
                </div>

                <div class="mt-4">
                    <h5>ğŸ“ ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ</h5>
                    <p>{{ listing.description|linebreaks }}</p>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card mb-3">
            <div class="card-body text-center">
                {% if listing.realtor.photo %}
                <img src="{{ listing.realtor.photo.url }}" class="realtor-img-round mb-3"
                    alt="{{ listing.realtor.name }}">
                {% endif %}
                <h5 class="card-title">{{ listing.realtor.name }}</h5>
                <p class="card-text text-muted">ğŸ’¼ Ğ Ğ¸ĞµĞ»Ñ‚Ğ¾Ñ€</p>
                <p class="card-text">ğŸ“ {{ listing.realtor.phone }}</p>
                <p class="card-text">ğŸ“§ {{ listing.realtor.email }}</p>

                {% if user.is_authenticated %}
                <a href="{% url 'chat:start_chat' listing.realtor.id listing.id %}" class="btn btn-warning w-100 mt-3">
                    ğŸ’¬ ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ§Ğ°Ñ‚ Ñ Ğ Ğ¸ĞµĞ»Ñ‚Ğ¾Ñ€Ğ¾Ğ¼
                </a>
                {% else %}
                <p class="mt-3 text-danger">ğŸ”’ Ğ’Ğ¾Ğ¹Ğ´Ğ¸Ñ‚Ğµ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ñ‡Ğ°Ñ‚.</p>
                {% endif %}
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                ğŸ“Š Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ ĞĞ±ÑŠĞµĞºÑ‚Ğ°
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item"><strong>ğŸ’° Ğ¦ĞµĞ½Ğ°:</strong> ${{ listing.price|floatformat:0 }}</li>
                <li class="list-group-item"><strong>ğŸ›ï¸ Ğ¡Ğ¿Ğ°Ğ»ÑŒĞ½Ğ¸:</strong> {{ listing.bedrooms }}</li>
                <li class="list-group-item"><strong>ğŸš¿ Ğ’Ğ°Ğ½Ğ½Ñ‹Ğµ:</strong> {{ listing.bathrooms }}</li>
                <li class="list-group-item"><strong>ğŸš— Ğ“Ğ°Ñ€Ğ°Ğ¶:</strong> {{ listing.garage }}</li>
                <li class="list-group-item"><strong>ğŸ“ ĞŸĞ»Ğ¾Ñ‰Ğ°Ğ´ÑŒ:</strong> {{ listing.sqft }} sqft</li>
                <li class="list-group-item"><strong>ğŸŒ³ Ğ£Ñ‡Ğ°ÑÑ‚Ğ¾Ğº:</strong> {{ listing.lot_size }} acre</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}